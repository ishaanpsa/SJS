<!doctype html>
<html lang="pa" dir="ltr">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name="theme-color" content="#ffffff">
<title>SJS — Mobile Viewer</title>
<style>
  :root{
    --maxw: 1000px;
    --gap: .75rem;
    --muted:#6b7280;
    --border:#e5e7eb;
    --bg:#fff;
  }
  body{margin:0;background:var(--bg);color:#111;font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Arial;}
  main{margin:0 auto; padding: var(--gap); max-width: var(--maxw); padding-bottom: 120px;}
  .stage{position:relative; width:100%; display:flex; align-items:center; justify-content:center;}
  img{display:block; max-width:100%; height:auto; border:1px solid var(--border); border-radius:.6rem; background:#fff;}
  .fit-height img{width:auto; height:calc(100svh - 160px); max-height:calc(100svh - 160px);}
  footer.nav{
    position: fixed; bottom: 0; left: 0; right: 0; z-index: 10;
    background: #fffccf;
    padding: .5rem .75rem calc(.5rem + env(safe-area-inset-bottom));
    border-top:1px solid var(--border);
    display:grid; grid-template-columns:1fr auto; gap:.5rem; align-items:center;
  }
  .controls{display:flex; gap:.5rem; align-items:center; flex-wrap:wrap}
  button{
    min-height:44px; padding:.6rem .9rem; font:inherit;
    border:1px solid var(--border); border-radius:.6rem; background:#f8fafc; cursor:pointer;
  }
  button:disabled{opacity:.5;cursor:not-allowed}
  #pageIndicator{font-weight:700}
  #wrap{display:flex; align-items:center; gap:.4rem}
  #jump{width:5.2rem; min-height:44px; padding:.45rem .6rem; border:1px solid var(--border); border-radius:.5rem}
  #fitToggle{min-width:110px}
  #err{color:#b91c1c; font-size:.9rem; margin-top:.5rem; display:none}
  .tips{color:var(--muted); font-size:.9rem; margin:.25rem auto .75rem; max-width:var(--maxw); padding:0 var(--gap);}
</style>
<body>
  <main>
    <div class="stage" id="stage">
      <img id="pageImg" alt="PDF page 1" loading="eager">
    </div>
    <div id="err"></div>
  </main>
  <div class="tips">Tips: Swipe ◀/▶, or use ←/→. “Fit: Height” shows the whole page on tall phones.</div>

  <footer class="nav">
    <div class="controls">
      <button id="prevBtn" aria-label="Previous page">◀ Prev</button>
      <span id="pageIndicator">Page 1 / 10</span>
      <button id="nextBtn" aria-label="Next page">Next ▶</button>
    </div>
    <div class="controls">
      <button id="fitToggle" title="Toggle fit: width/height">Fit: Width</button>
      <div id="wrap">
        <label for="jump">Jump:&nbsp;</label>
        <input id="jump" type="number" min="1" max="10" value="1">
        <button id="goBtn">Go</button>
      </div>
    </div>
  </footer>

<script>
  const NUM_PAGES = 10;
  const BASE = "assets";
  const fname = n => `page-${String(n).padStart(3,"0")}.png`;
  const bust = `?v=${Date.now()}`;

  let idx = 0;
  const img   = document.getElementById('pageImg');
  const prev  = document.getElementById('prevBtn');
  const next  = document.getElementById('nextBtn');
  const ind   = document.getElementById('pageIndicator');
  const jump  = document.getElementById('jump');
  const go    = document.getElementById('goBtn');
  const err   = document.getElementById('err');
  const stage = document.getElementById('stage');
  const fitToggle = document.getElementById('fitToggle');

  function urlFor(n){ return `${BASE}/${fname(n)}${bust}`; }
  function setError(m){ err.style.display='block'; err.textContent=m; console.error(m); }
  function clearError(){ err.style.display='none'; err.textContent=''; }
  function update(){
    clearError();
    const n = idx+1;
    img.src = urlFor(n);
    img.alt = `PDF page ${n}`;
    ind.textContent = `Page ${n} / ${NUM_PAGES}`;
    jump.value = n;
    prev.disabled = (idx===0);
    next.disabled = (idx===NUM_PAGES-1);
    location.hash = `#p${n}`;
  }

  img.addEventListener('error', ()=>{
    setError(`Couldn’t load: ${img.src.replace(location.origin,'')}.
Check that the file exists (case-sensitive) at ${BASE}/${fname(idx+1)}.`);
  });

  prev.addEventListener('click', () => { if(idx>0){ idx--; update(); } });
  next.addEventListener('click', () => { if(idx<NUM_PAGES-1){ idx++; update(); } });
  go.addEventListener('click',   () => {
    let n = parseInt(jump.value,10);
    if(!isNaN(n)){ n = Math.min(Math.max(n,1), NUM_PAGES); idx=n-1; update(); }
  });
  window.addEventListener('keydown', e => {
    if(e.key==='ArrowLeft'  && idx>0){ idx--; update(); }
    if(e.key==='ArrowRight' && idx<NUM_PAGES-1){ idx++; update(); }
  });

  // Swipe navigation
  let sx=0,sy=0,moved=false;
  const THRESH=40;
  stage.addEventListener('touchstart', e=>{const t=e.changedTouches[0]; sx=t.clientX; sy=t.clientY; moved=false;},{passive:true});
  stage.addEventListener('touchmove', ()=>{moved=true;},{passive:true});
  stage.addEventListener('touchend', e=>{
    if(!moved)return;
    const t=e.changedTouches[0]; const dx=t.clientX-sx, dy=t.clientY-sy;
    if(Math.abs(dx)>Math.abs(dy)&&Math.abs(dx)>THRESH){
      if(dx<0 && idx<NUM_PAGES-1){ idx++; update(); }
      if(dx>0 && idx>0){ idx--; update(); }
    }
  },{passive:true});

  // Fit toggle
  let fit="width";
  function applyFit(){
    if(fit==="height"){ stage.classList.add('fit-height'); fitToggle.textContent="Fit: Height"; }
    else{ stage.classList.remove('fit-height'); fitToggle.textContent="Fit: Width"; }
  }
  fitToggle.addEventListener('click', ()=>{ fit=(fit==="width"?"height":"width"); applyFit(); });

  (function init(){
    const m=location.hash.match(/#p(\d+)/i);
    if(m){ idx=Math.min(Math.max(parseInt(m[1],10)-1,0), NUM_PAGES-1); }
    applyFit();
    update();
  })();
</script>
</body>
</html>
